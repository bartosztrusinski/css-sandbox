---
import MainLayout from "../layouts/MainLayout.astro";
import parseFilename from "../utils/parseFilename";

const title = parseFilename(import.meta.url);
---

<MainLayout title={title}>
  <main>
    <h1>Shiny call-to-action button created using <span>@property</span></h1>
    <button>Click me</button>
  </main>
</MainLayout>

<style>
  @property --gradient-angle {
    syntax: "<angle>";
    initial-value: 0deg;
    inherits: false;
  }

  @property --gradient-percent {
    syntax: "<percentage>";
    initial-value: 5%;
    inherits: false;
  }

  button {
    --color-shine: hsl(0, 0%, 100%);
    --color-highlight: hsl(229, 95%, 49%);
    --color-background: hsl(0, 0%, 0%);
    --shine-gradient-percent: 50%;

    padding: 1rem 5rem;
    cursor: pointer;
    background:
      linear-gradient(var(--color-background), var(--color-background)) padding-box,
      conic-gradient(
          from var(--gradient-angle),
          transparent calc(var(--shine-gradient-percent) - var(--gradient-percent) * 2),
          var(--color-highlight) calc(var(--shine-gradient-percent) - var(--gradient-percent)),
          var(--color-shine) var(--shine-gradient-percent),
          var(--color-highlight) calc(var(--shine-gradient-percent) + var(--gradient-percent)),
          transparent calc(var(--shine-gradient-percent) + var(--gradient-percent) * 2)
        )
        border-box;
    border-radius: 3rem;
    border: 1px solid transparent;
    animation: rotate-gradient 3000ms linear infinite;
    transition: 200ms cubic-bezier(0.25, 1, 0.5, 1);
    transition-property: --gradient-percent;

    &:is(:hover, :focus-visible) {
      --gradient-percent: 20%;
    }
  }

  @keyframes rotate-gradient {
    to {
      --gradient-angle: 360deg;
    }
  }

  /* Other styles */
  body {
    --padding: 4rem;
    --max-width: 40ch;

    width: min(var(--max-width), 100% - var(--padding));
    margin-inline: auto;
  }

  main {
    text-align: center;
    padding-top: 25vh;
  }

  h1 {
    font-size: clamp(2rem, 4vw, 3rem);
    line-height: 1.1;
    text-wrap: pretty;
    margin-bottom: 1em;

    & > span {
      text-decoration: underline 0.08em wavy var(--color-primary);
      text-underline-offset: clamp(0.5rem, 0.2rem + 1vw, 0.8rem);
      color: var(--color-primary);
    }
  }
</style>
